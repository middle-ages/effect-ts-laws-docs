<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <title>Book of Laws</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=1" />
    <meta name="color-scheme" content="light dark" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css"
      integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+"
      crossorigin="anonymous" />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"
      integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg"
      crossorigin="anonymous"></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
      integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk"
      crossorigin="anonymous"
      onload="renderMathInElement(document.body, {delimiters: [{left: '$', right: '$', display: false}], throwOnError : false, trust: true})"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      media="screen"
      rel="stylesheet"
      type="text/css"
      href="catalog-of-laws/index.css" />
  </head>
  <body>
    <macro>$\global\def\empty{\htmlClass{empty}{\varnothing}}$</macro>
    <macro>$\global\def\pipe{\:\htmlClass{pipe}{\footnotesize{▹}}\,}$</macro>
    <macro>$\global\def\flow{\:\htmlClass{flow}{\scriptsize{∘}}\,}$</macro>
    <macro>$\global\def\fn#1{\htmlClass{fn}{#1}}$</macro>
    <macro>$\global\def\imap{\fn{imap}}$</macro>
    <macro>$\global\def\map{\fn{map}}$</macro>
    <macro>$\global\def\flatMap{\fn{flatMap}}$</macro>
    <macro>$\global\def\contramap{\fn{contramap}}$</macro>
    <macro>$\global\def\of{\fn{of}}$</macro>
    <macro>$\global\def\ap{\fn{ap}}$</macro>
    <macro>$\global\def\id{\fn{id}}$</macro>
    <macro>$\global\def\product{\fn{product}}$</macro>
    <macro>$\global\def\traverse{\fn{traverse}}$</macro>
    <macro>$\global\def\apply{\fn{apply}}$</macro>
    <macro>$\global\def\compose{\fn{compose}}$</macro>
    <macro>$\global\def\F{\mathrm{F}}$</macro>
    <macro>$\global\def\G{\mathrm{G}}$</macro>
    <macro>$\global\def\H{\mathrm{H}}$</macro>
    <macro>$\global\def\GH{\mathrm{GH}}$</macro>
    <macro>$\global\def\Id{\mathrm{Id}}$</macro>

    <diagram>
      <header>
        <h1>Typeclass Laws</h1>
        <a class="home" href="https://github.com/middle-ages/effect-ts-laws"
          >⚖ effect-ts-laws</a
        >
      </header>
      <article>
        <div class="header">
          <d title="Typeclass “extends” relation.">Is a</d>
          <d title="Typeclass name in “effect-ts” source.">Typeclass</d>
          <d title="Law name.">Law</d>
          <d style="grid-column: 4/-1" title="Law predicate.">Predicate</d>
        </div>
        <laws
          style="grid-row-start: 2; margin-top: calc(var(--vpad)); --laws: 3">
          <d></d>
          <e>Equivalence</e>

          <d>transitivity</d>
          <d>$a=b \: ∧ \: b=c$</d><d>$⇒$</d><d>$a=c$</d>

          <d>symmetry</d>
          <d>$a=b$</d><d>$⇔$</d><d>$b=a$</d>

          <d>reflexivity</d><d>$a$</d><d>$=$</d><d>$a$</d>
        </laws>
        <separator></separator>
        <laws class="laws-5" style="grid-row-start: 4; --laws: 5">
          <d></d>
          <e>Order</e>

          <d>transitivity</d>
          <d>$a≤b \: ∧ \: b≤c$</d><d>$⇒$</d><d>$a≤c$</d>

          <d>connectivity</d>
          <d>$a≤b$</d><d>$∨$</d><d>$b≤a$</d>

          <d>reflexivity</d>
          <d>$a$</d><d>$≤$</d><d>$a$</d>

          <d>complement consistency</d>
          <d>$a≤b$</d><d>$⇒$</d><d>$a \ngtr b$</d>

          <d>equivalence consistency</d>
          <d>$a≤b \: ∧ \: b≤a$</d><d>$⇒$</d><d>$a=b$</d>
        </laws>
        <separator></separator>
        <laws style="--laws: 2">
          <div>
            <line-middle-top></line-middle-top>
            <arrow-head-middle></arrow-head-middle>
          </div>
          <e>Semigroup</e>

          <d>associativity</d>
          <d>$(a ⊕ b) ⊕ c$</d><d>$=$</d><d>$a ⊕ (b ⊕ c)$</d>

          <d>combineMany associativity</d>
          <d>$\fn{combineMany}(a, [b, c])$</d>
          <d>$=$</d>
          <d>$a ⊕ (b ⊕ c)$</d>
        </laws>
        <separator></separator>
        <laws style="--laws: 2">
          <div>
            <line-middle-bottom></line-middle-bottom>
            <arrow-tail-middle></arrow-tail-middle>
          </div>
          <e>Monoid</e>

          <d>left identity</d>
          <d>$\empty ⊕ a$</d><d>$=$</d><d>$a$</d>

          <d>right identity</d>
          <d>$a$</d><d>$=$</d><d>$a ⊕ \empty$</d>
        </laws>
        <separator></separator>
        <laws style="--laws: 2">
          <div>
            <line-double-top-down class="half-top"></line-double-top-down>
            <line class="half-bottom down"></line>
            <arrow-head class="top-2"></arrow-head>
            <arrow-head class="bottom-2"></arrow-head>
          </div>
          <e>Invariant</e>

          <d>identity</d><d>$\imap(\id, \id)$</d><d>$=$</d>
          <d>$\id$</d>

          <d>composition</d>
          <d>$\imap(ab, ba) \flow \imap(bc, cb)$</d>
          <d>$=$</d>
          <d>$\imap(bc \flow ab, ba \flow cb)$</d>
        </laws>

        <separator></separator>
        <laws style="--laws: 2">
          <div>
            <line-middle-bottom></line-middle-bottom>
            <arrow-tail-middle></arrow-tail-middle>
          </div>
          <e>Contravariant</e>

          <d>identity</d>
          <d>$\contramap(\id)$</d><d>$=$</d><d>$\id$</d>

          <d>composition</d>
          <d>$\contramap(ba) \flow \contramap(cb)$</d>
          <d>$=$</d>
          <d>$\contramap(ba \flow cb)$</d>
        </laws>

        <separator></separator>
        <laws style="--laws: 2">
          <div>
            <arrow-tail class="top-3"></arrow-tail>
            <arrow-head-middle></arrow-head-middle>
            <arrow-head class="bottom-3"></arrow-head>
            <line class="third-top up line-2"></line>
            <line-double-top-down></line-double-top-down>
            <line class="third-bottom down"></line>
          </div>
          <e>Covariant</e>

          <d>identity</d><d>$\map(\id)$</d><d>$=$</d><d>$\id$</d>

          <d>composition</d>
          <d>$\map(ab) \flow \map(bc)$</d>
          <d>$=$</d>
          <d>$\map(bc \flow ab)$</d>
        </laws>

        <separator></separator>
        <laws class="laws-7" style="--laws: 7">
          <div>
            <line
              class="middle-bottom up"
              style="
                height: calc(
                  var(--gap-line-height) + 5 * var(--line-height-half)
                );
              "></line>
            <arrow-tail-middle></arrow-tail-middle>
          </div>
          <e>Applicative</e>

          <d>identity</d>
          <d>$\id \,\pipe\, \of \,\pipe\, \ap(a)$</d><d>$=$</d><d>$a$</d>

          <d>homomorphism</d>
          <d>$ab \pipe \of \pipe (a \pipe \of \pipe \ap)$</d>
          <d>$=$</d>
          <d>$a \pipe ab \pipe \of$</d>

          <d>associative composition</d>
          <d>$fbc\, \pipe \map(\compose) \pipe \ap(fab) \pipe \ap(fa)$</d>
          <d>$=$</d>
          <d>$fbc\, \pipe \ap\big(fab \pipe \ap(fa)\big)$</d>

          <d>interchange</d>
          <d>$fab\, \pipe \ap\big(\of(a)\big)$</d>
          <d>$=$</d>
          <d>$a \pipe \apply \pipe \of \pipe \ap(fab)$</d>

          <d>map consistency</d>
          <d>$fa \pipe \map(ab)$</d>
          <d>$=$</d>
          <d>$ab \pipe \of \pipe \ap(fa)$</d>

          <d>product consistency</d>
          <d>$fab\, \pipe \ap(fa)$</d>
          <d>$=$</d>
          <d>$\product(fab, fa) \pipe \map\big(([ab, a]) ⇒ ab(a)\big)$</d>

          <d>flatMap consistency</d>
          <d>$\ap(fa)$</d>
          <d>$=$</d>
          <d>$\flatMap\big(ab ⇒ \!\map(fa, ab)\big)$</d>
        </laws>

        <separator></separator>
        <laws class="laws-4" style="--laws: 4">
          <div>
            <line
              class="middle-bottom up line-2"
              style="
                height: calc(
                  2 * var(--gap-line-height) + 14 * var(--line-height-half) +
                    var(--gap-height)
                );
              "></line>
            <arrow-tail-middle></arrow-tail-middle>
          </div>
          <e>Monad</e>

          <d>left identity</d><d>$\of \flow \flatMap(afb)$</d><d>$=$</d
          ><d>$afb$</d>

          <d>right identity</d><d>$\flatMap(\of)$</d><d>$=$</d><d>$\id$</d>

          <d>associativity</d>
          <d>$\flatMap(afb) \flow \flatMap(bfc)$</d>
          <d>$=$</d>
          <d>$\flatMap\big(\flatMap(bfc) \flow afb\big)$</d>

          <d>map consistency</d>
          <d>$\map(ab)$</d>
          <d>$=$</d>
          <d>$\flatMap(\of \flow ab)$</d>
        </laws>

        <separator></separator>
        <laws
          style="
            padding-bottom: var(--vpad);
            border-bottom: var(--line-table);
            --laws: 3;
          ">
          <d></d>
          <e>Traversable</e>

          <d>identity</d><d>$\Id.\traverse(\id)$</d><d>$=$</d><d>$\id$</d>

          <d>composition</d>
          <d>$\G.\map\big(\H.\traverse(bhc)\big) \flow \G.\traverse(agb)$</d>
          <d>$=$</d>
          <d>$\GH.\traverse\big(\G.\map(bhc) \flow agb\big)$</d>

          <d>map consistency</d>
          <d>$\F.\map(ab)$</d>
          <d>$=$</d>
          <d>$\Id.\traverse(ab)$</d>
        </laws>
      </article>
    </diagram>
  </body>
</html>
